import { Card, CardHeader, CardTitle, CardContent } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import { Lock, Plus, Search, Star, Bookmark, FileText } from "lucide-react";
import { Input } from "@/components/ui/input";
import { useAuth } from "@/hooks/useAuth";
import { supabase } from "@/integrations/supabase/client";
import { useEffect, useState } from "react";

type Blueprint = {
  name: string;
  description: string;
  template: string;
  category: string;
};

const freeBlueprints: Blueprint[] = [
  { name: "Product Launch Blueprint", description: "Complete template for product launches", template: "# Product Launch Brief\n## Narrative\n[Product story and positioning]\n## ICP Pain Points\n[Target customer problems]\n## Key Benefits\n1. [Benefit 1]\n2. [Benefit 2]\n3. [Benefit 3]\n## Messaging Pillars\n[Core messages]\n## Call-to-Action\n[Clear next steps]", category: "Marketing" },
  { name: "SOP Template", description: "Standard Operating Procedure template", template: "# Standard Operating Procedure\n## Purpose\n[Why this SOP exists]\n## Scope\n[What this covers]\n## Responsibilities\n[Who does what]\n## Procedure\n[Step-by-step process]\n## Quality Controls\n[Checks and balances]", category: "Operations" },
  { name: "Executive Dashboard Blueprint", description: "Template for executive reporting", template: "# Executive Dashboard\n## Key Metrics\n[Primary KPIs]\n## Performance Summary\n[5 bullet points]\n## Risks & Opportunities\n[Assessment]\n## Recommendations\n[Action items]\n## Next Steps\n[Timeline and owners]", category: "Business Intelligence" },
  { name: "Brand Voice Guide", description: "Template for maintaining brand consistency", template: "# Brand Voice Guide\n## Voice Characteristics\n[Personality traits]\n## Tone Guidelines\n[Situational tones]\n## Do's and Don'ts\n[Examples]\n## Templates\n[Reusable formats]\n## Quality Checks\n[Verification process]", category: "Branding" },
];

const proBlueprints: Blueprint[] = [
  { name: "Comprehensive Business Plan", description: "Professional 50-page business plan template", template: "# BUSINESS PLAN\n## EXECUTIVE SUMMARY\n### Company Overview\n[Mission, vision, values]\n### Market Opportunity\n[TAM, SAM, SOM analysis]\n### Competitive Advantage\n[Unique value proposition]\n### Financial Highlights\n[5-year projections summary]\n### Funding Requirements\n[Investment needed and use of funds]\n\n## COMPANY DESCRIPTION\n### Company History\n[Founding story and milestones]\n### Ownership Structure\n[Legal structure and shareholders]\n### Location and Facilities\n[Physical presence and requirements]\n\n## MARKET ANALYSIS\n### Industry Overview\n[Market size, trends, growth drivers]\n### Target Market\n[Customer segments and personas]\n### Market Needs\n[Problems we solve]\n### Competitive Analysis\n[Direct and indirect competitors]\n\n## ORGANIZATION & MANAGEMENT\n### Organizational Structure\n[Org chart and reporting lines]\n### Management Team\n[Key personnel and advisors]\n### Personnel Plan\n[Hiring timeline and job descriptions]\n\n## PRODUCTS OR SERVICES\n### Product Description\n[Features, benefits, lifecycle]\n### Research & Development\n[Innovation pipeline and IP]\n### Manufacturing & Operations\n[Production process and quality control]\n\n## MARKETING & SALES\n### Marketing Strategy\n[Brand positioning and messaging]\n### Sales Strategy\n[Sales process and channels]\n### Pricing Strategy\n[Pricing model and rationale]\n### Customer Retention\n[Loyalty programs and support]\n\n## FUNDING REQUEST\n### Funding Requirements\n[Total funding needed]\n### Use of Funds\n[Detailed allocation]\n### Future Funding\n[Long-term capital needs]\n### Exit Strategy\n[Investor return scenarios]\n\n## FINANCIAL PROJECTIONS\n### Revenue Forecasts\n[5-year revenue projections]\n### Expense Budgets\n[Operating expense breakdown]\n### Cash Flow Analysis\n[Monthly cash flow for first 2 years]\n### Break-even Analysis\n[Time to profitability]\n### Scenario Planning\n[Best, base, worst case scenarios]\n\n## APPENDIX\n### Market Research Data\n### Financial Statements\n### Legal Documents\n### Product Specifications", category: "Business Planning" },
  { name: "Investment Pitch Deck", description: "Professional investor presentation template", template: "# INVESTMENT PITCH DECK\n\n## SLIDE 1: TITLE\n### Company Name & Tagline\n[Your company name]\n[Compelling one-liner]\n### Contact Information\n[Founder details and contact]\n\n## SLIDE 2: PROBLEM\n### The Pain Point\n[Clear problem statement]\n### Market Size Impact\n[Who and how many affected]\n### Current Solutions Shortfall\n[Why existing solutions fail]\n\n## SLIDE 3: SOLUTION\n### Our Approach\n[How we solve the problem]\n### Key Features\n[3-4 main product features]\n### Value Proposition\n[Why we're better/different]\n\n## SLIDE 4: MARKET OPPORTUNITY\n### Total Addressable Market (TAM)\n[Market size in billions]\n### Serviceable Addressable Market (SAM)\n[Realistic market segment]\n### Serviceable Obtainable Market (SOM)\n[Our realistic market share]\n\n## SLIDE 5: PRODUCT DEMO\n### Live Demo or Screenshots\n[Visual product demonstration]\n### Key User Journey\n[How customers use the product]\n### Success Metrics\n[Proof of product-market fit]\n\n## SLIDE 6: TRACTION\n### Key Metrics\n[Revenue, users, growth rates]\n### Customer Testimonials\n[Social proof and validation]\n### Partnerships\n[Strategic relationships]\n\n## SLIDE 7: BUSINESS MODEL\n### Revenue Streams\n[How we make money]\n### Unit Economics\n[LTV/CAC ratio and margins]\n### Pricing Strategy\n[Pricing tiers and rationale]\n\n## SLIDE 8: COMPETITION\n### Competitive Landscape\n[Direct and indirect competitors]\n### Competitive Advantages\n[Our moats and differentiators]\n### Market Positioning\n[Where we fit in the market]\n\n## SLIDE 9: GO-TO-MARKET\n### Customer Acquisition Strategy\n[How we acquire customers]\n### Sales & Marketing Plan\n[Channel strategy and tactics]\n### Growth Strategy\n[How we scale]\n\n## SLIDE 10: TEAM\n### Founding Team\n[Key founders and their backgrounds]\n### Advisory Board\n[Industry experts and mentors]\n### Key Hires\n[Critical positions to fill]\n\n## SLIDE 11: FINANCIALS\n### Revenue Projections\n[5-year revenue forecast]\n### Key Financial Metrics\n[Margins and profitability timeline]\n### Unit Economics\n[Customer acquisition costs and lifetime value]\n\n## SLIDE 12: USE OF FUNDS\n### Funding Amount\n[How much we're raising]\n### Fund Allocation\n[Detailed use of investment]\n### Milestones\n[What we'll achieve with funding]\n\n## SLIDE 13: INVESTMENT TERMS\n### Valuation\n[Pre/post money valuation]\n### Equity Offering\n[Percentage of company]\n### Investor Rights\n[Board seats, information rights]\n\n## SLIDE 14: NEXT STEPS\n### Timeline\n[Fundraising timeline]\n### Contact Information\n[How to reach us]\n### Call to Action\n[What we want from investors]", category: "Investment" },
  { name: "HR Policy Manual", description: "Comprehensive employee handbook template", template: "# EMPLOYEE HANDBOOK\n\n## TABLE OF CONTENTS\n1. Welcome & Company Overview\n2. Employment Policies\n3. Compensation & Benefits\n4. Performance Management\n5. Code of Conduct\n6. Health & Safety\n7. Technology & Security\n8. Equal Opportunity & Anti-Discrimination\n9. Leave Policies\n10. Termination Procedures\n\n## 1. WELCOME & COMPANY OVERVIEW\n### Welcome Message\n[CEO welcome letter]\n### Company Mission & Values\n[Mission statement and core values]\n### Company History\n[Brief company background]\n### Organizational Structure\n[Reporting structure and departments]\n\n## 2. EMPLOYMENT POLICIES\n### Employment At-Will\n[At-will employment explanation]\n### Equal Employment Opportunity\n[EEO policy and commitment]\n### Background Checks\n[Pre-employment screening policy]\n### New Employee Orientation\n[Onboarding process and timeline]\n### Job Classifications\n[Full-time, part-time, contractor definitions]\n### Work Schedules\n[Standard hours and flexible work options]\n### Attendance Policy\n[Expectations and procedures]\n### Remote Work Policy\n[Remote work guidelines and requirements]\n\n## 3. COMPENSATION & BENEFITS\n### Compensation Philosophy\n[Pay equity and merit-based compensation]\n### Payroll Procedures\n[Pay periods and direct deposit]\n### Overtime Policy\n[Overtime eligibility and calculation]\n### Health Insurance\n[Medical, dental, vision coverage]\n### Retirement Plans\n[401(k) and employer matching]\n### Paid Time Off\n[Vacation, sick leave, holidays]\n### Professional Development\n[Training and education assistance]\n### Employee Assistance Program\n[Mental health and counseling services]\n\n## 4. PERFORMANCE MANAGEMENT\n### Performance Review Process\n[Annual and mid-year review cycles]\n### Goal Setting\n[SMART goals and OKR framework]\n### Performance Improvement Plans\n[Process for addressing performance issues]\n### Promotion Policy\n[Career advancement criteria]\n### Recognition Programs\n[Employee recognition and rewards]\n\n## 5. CODE OF CONDUCT\n### Ethical Standards\n[Business ethics and integrity]\n### Conflicts of Interest\n[Disclosure and management procedures]\n### Confidentiality\n[Protection of company information]\n### Anti-Harassment Policy\n[Zero tolerance policy and reporting]\n### Social Media Policy\n[Professional social media guidelines]\n### Dress Code\n[Professional appearance expectations]\n### Workplace Violence Prevention\n[Zero tolerance policy and procedures]\n\n## 6. HEALTH & SAFETY\n### Workplace Safety\n[Safety procedures and responsibilities]\n### Injury Reporting\n[Workers' compensation procedures]\n### Drug-Free Workplace\n[Substance abuse policy]\n### Emergency Procedures\n[Evacuation and emergency contacts]\n\n## 7. TECHNOLOGY & SECURITY\n### IT Equipment Policy\n[Company device usage and care]\n### Data Security\n[Information security requirements]\n### Internet and Email Usage\n[Acceptable use policy]\n### Software Licensing\n[Authorized software usage]\n### BYOD Policy\n[Personal device usage guidelines]\n\n## 8. EQUAL OPPORTUNITY & ANTI-DISCRIMINATION\n### Anti-Discrimination Policy\n[Protected classes and non-discrimination]\n### Accommodation Process\n[Reasonable accommodation procedures]\n### Complaint Procedures\n[Reporting and investigation process]\n### Anti-Retaliation Policy\n[Protection for good faith reporting]\n\n## 9. LEAVE POLICIES\n### Family and Medical Leave\n[FMLA and state leave laws]\n### Maternity/Paternity Leave\n[Parental leave benefits]\n### Bereavement Leave\n[Time off for family deaths]\n### Jury Duty\n[Court service obligations]\n### Military Leave\n[Service member protections]\n### Personal Leave\n[Unpaid leave of absence]\n\n## 10. TERMINATION PROCEDURES\n### Voluntary Resignation\n[Notice requirements and procedures]\n### Involuntary Termination\n[Termination for cause procedures]\n### Final Pay\n[Final paycheck and benefit information]\n### Return of Company Property\n[Equipment and document return]\n### Exit Interviews\n[Feedback collection process]\n### References\n[Reference policy and procedures]", category: "Human Resources" },
  { name: "Marketing Strategy Blueprint", description: "Comprehensive marketing plan template", template: "# MARKETING STRATEGY & PLAN\n\n## EXECUTIVE SUMMARY\n### Marketing Objectives\n[Key goals and success metrics]\n### Target Market\n[Primary customer segments]\n### Positioning Strategy\n[Unique value proposition]\n### Budget Overview\n[Marketing investment and ROI expectations]\n\n## SITUATION ANALYSIS\n### Market Analysis\n[Industry trends and market size]\n### Competitive Analysis\n[Competitor positioning and strategies]\n### SWOT Analysis\n[Strengths, weaknesses, opportunities, threats]\n### Customer Analysis\n[Customer needs and buying behavior]\n\n## TARGET MARKET\n### Market Segmentation\n[Demographic, psychographic, behavioral segments]\n### Primary Target Personas\n[Detailed buyer personas with pain points]\n### Secondary Markets\n[Additional opportunities]\n### Market Size and Potential\n[TAM, SAM, SOM calculations]\n\n## POSITIONING & MESSAGING\n### Brand Positioning\n[How we position against competitors]\n### Value Proposition\n[Unique benefits and differentiators]\n### Key Messages\n[Core messaging for each audience]\n### Brand Voice & Tone\n[Communication style and personality]\n\n## MARKETING OBJECTIVES\n### Awareness Goals\n[Brand awareness and reach targets]\n### Lead Generation Goals\n[Lead quantity and quality metrics]\n### Customer Acquisition Goals\n[New customer targets and cost per acquisition]\n### Retention Goals\n[Customer lifetime value and churn reduction]\n### Revenue Goals\n[Revenue attribution and growth targets]\n\n## MARKETING MIX (4 Ps)\n### Product Strategy\n[Product features, benefits, and lifecycle]\n### Pricing Strategy\n[Pricing model and competitive positioning]\n### Place Strategy\n[Distribution channels and partnerships]\n### Promotion Strategy\n[Communication channels and tactics]\n\n## MARKETING CHANNELS\n### Digital Marketing\n[Website, SEO, SEM, social media, email]\n### Content Marketing\n[Blog, whitepapers, webinars, videos]\n### Public Relations\n[Media relations and thought leadership]\n### Events & Trade Shows\n[Industry events and speaking opportunities]\n### Partnerships\n[Channel partners and co-marketing]\n### Traditional Marketing\n[Print, radio, outdoor advertising]\n\n## CONTENT STRATEGY\n### Content Pillars\n[Key themes and topics]\n### Content Calendar\n[Publishing schedule and responsibilities]\n### Content Types\n[Blog posts, videos, infographics, case studies]\n### Content Distribution\n[Owned, earned, and paid media channels]\n### Content Performance\n[Metrics and optimization strategies]\n\n## DIGITAL MARKETING STRATEGY\n### Website Strategy\n[User experience and conversion optimization]\n### SEO Strategy\n[Keyword targeting and content optimization]\n### SEM Strategy\n[Paid search campaigns and budget allocation]\n### Social Media Strategy\n[Platform selection and engagement tactics]\n### Email Marketing\n[List building and nurture campaigns]\n### Marketing Automation\n[Lead scoring and lifecycle marketing]\n\n## CAMPAIGN PLANNING\n### Campaign Calendar\n[Major campaigns and product launches]\n### Campaign Themes\n[Seasonal and event-based campaigns]\n### Budget Allocation\n[Investment by channel and campaign]\n### Creative Development\n[Asset creation and brand consistency]\n### Performance Tracking\n[KPIs and reporting cadence]\n\n## BUDGET & RESOURCE ALLOCATION\n### Total Marketing Budget\n[Annual investment and quarterly breakdown]\n### Budget by Channel\n[Investment allocation across channels]\n### Team Structure\n[Internal team and external agency roles]\n### Technology Stack\n[Marketing tools and platforms]\n### Measurement Tools\n[Analytics and reporting infrastructure]\n\n## MEASUREMENT & ANALYTICS\n### Key Performance Indicators\n[Primary metrics and benchmarks]\n### Attribution Models\n[How we track and credit conversions]\n### Reporting Schedule\n[Weekly, monthly, quarterly reviews]\n### Optimization Process\n[How we use data to improve performance]\n### ROI Calculation\n[Marketing return on investment methods]\n\n## IMPLEMENTATION TIMELINE\n### Phase 1 (Months 1-3)\n[Initial launch activities]\n### Phase 2 (Months 4-6)\n[Scale and optimization phase]\n### Phase 3 (Months 7-9)\n[Expansion and new channel testing]\n### Phase 4 (Months 10-12)\n[Review and planning for next year]\n\n## RISK MANAGEMENT\n### Market Risks\n[Economic and competitive threats]\n### Execution Risks\n[Resource and timeline challenges]\n### Mitigation Strategies\n[Contingency plans and alternatives]\n### Success Factors\n[Critical elements for achieving goals]", category: "Marketing Strategy" },
  { name: "Crisis Management Plan", description: "Comprehensive crisis response framework", template: "# CRISIS MANAGEMENT PLAN\n\n## EXECUTIVE SUMMARY\n### Purpose\n[Plan objectives and scope]\n### Crisis Definition\n[What constitutes a crisis]\n### Response Philosophy\n[Our approach to crisis management]\n### Key Stakeholders\n[Primary audiences and concerns]\n\n## CRISIS MANAGEMENT TEAM\n### Crisis Leadership\n[CEO/President role and responsibilities]\n### Crisis Manager\n[Day-to-day crisis coordination]\n### Communications Lead\n[Media and stakeholder communications]\n### Legal Counsel\n[Legal guidance and compliance]\n### Operations Lead\n[Business continuity and operations]\n### HR Lead\n[Employee communications and support]\n### IT/Security Lead\n[Technical response and cybersecurity]\n### External Advisors\n[PR agency, legal counsel, consultants]\n\n## CRISIS TYPES & SCENARIOS\n### Operational Crises\n[Product recalls, service outages, supply chain disruptions]\n### Financial Crises\n[Accounting irregularities, bankruptcy, major losses]\n### Reputational Crises\n[Negative publicity, social media backlash, boycotts]\n### Legal/Regulatory Crises\n[Lawsuits, regulatory violations, investigations]\n### Security Crises\n[Data breaches, cyber attacks, physical security]\n### Human Resources Crises\n[Workplace violence, discrimination, layoffs]\n### Natural Disasters\n[Weather emergencies, facility damage, business interruption]\n### Leadership Crises\n[Executive misconduct, sudden departure, succession]\n\n## CRISIS RESPONSE PHASES\n### Phase 1: Crisis Detection (0-1 Hour)\n[Early warning systems and rapid assessment]\n### Phase 2: Crisis Assessment (1-4 Hours)\n[Situation analysis and team activation]\n### Phase 3: Initial Response (4-24 Hours)\n[Immediate actions and stakeholder communications]\n### Phase 4: Crisis Management (1-7 Days)\n[Ongoing response and issue resolution]\n### Phase 5: Recovery (1-4 Weeks)\n[Business continuity and reputation repair]\n### Phase 6: Post-Crisis Analysis (After Resolution)\n[Lessons learned and plan improvements]\n\n## STAKEHOLDER COMMUNICATIONS\n### Internal Stakeholders\n[Employees, board of directors, investors]\n### External Stakeholders\n[Customers, suppliers, regulators, community]\n### Media Relations\n[Press statements, interviews, press conferences]\n### Digital Communications\n[Website, social media, email campaigns]\n### Investor Relations\n[Shareholder communications and SEC filings]\n### Government Relations\n[Regulatory agencies and elected officials]\n\n## COMMUNICATION PROTOCOLS\n### Message Development\n[Key messages for each stakeholder group]\n### Approval Process\n[Who approves what communications when]\n### Communication Channels\n[How we reach different audiences]\n### Spokesperson Guidelines\n[Who speaks for the company and when]\n### Social Media Protocol\n[Social media monitoring and response]\n### Media Training\n[Spokesperson preparation and key messages]\n\n## DECISION-MAKING FRAMEWORK\n### Decision Authority\n[Who makes what decisions during crisis]\n### Escalation Procedures\n[When and how to escalate issues]\n### Information Flow\n[How information moves through organization]\n### Documentation Requirements\n[What needs to be recorded and why]\n### Legal Considerations\n[Privilege, litigation hold, regulatory requirements]\n\n## BUSINESS CONTINUITY\n### Critical Business Functions\n[Essential operations that must continue]\n### Backup Systems\n[Technology and operational redundancies]\n### Alternative Locations\n[Backup facilities and remote work capabilities]\n### Supply Chain Alternatives\n[Backup suppliers and contingency plans]\n### Financial Reserves\n[Cash flow and credit facilities for crisis]\n### Insurance Coverage\n[What's covered and claim procedures]\n\n## CRISIS COMMUNICATION TEMPLATES\n### Internal Announcement Template\n[Employee communication format]\n### Press Release Template\n[Media communication format]\n### Customer Communication Template\n[Customer notification format]\n### Social Media Response Template\n[Social media crisis response format]\n### Investor Update Template\n[Shareholder communication format]\n### Website Banner Template\n[Website crisis notification format]\n\n## CONTACT INFORMATION\n### Crisis Team Contacts\n[24/7 contact information for all team members]\n### External Resources\n[PR agencies, legal counsel, consultants]\n### Media Contacts\n[Key journalists and media outlets]\n### Government Contacts\n[Regulatory agencies and emergency services]\n### Vendor Contacts\n[Critical suppliers and service providers]\n### Emergency Services\n[Police, fire, medical, security]\n\n## TRAINING & PREPAREDNESS\n### Crisis Simulation Exercises\n[Regular drills and scenario planning]\n### Media Training\n[Spokesperson development and practice]\n### Plan Updates\n[Regular review and revision schedule]\n### Team Training\n[Crisis management skills development]\n### Communication Skills\n[Writing and presentation training]\n\n## POST-CRISIS EVALUATION\n### Response Assessment\n[What worked well and what didn't]\n### Stakeholder Feedback\n[How stakeholders perceived our response]\n### Media Analysis\n[Coverage analysis and sentiment]\n### Financial Impact\n[Cost of crisis and response effectiveness]\n### Reputation Impact\n[Brand perception and trust metrics]\n### Plan Improvements\n[Updates based on lessons learned]\n\n## APPENDICES\n### Legal Requirements\n[Regulatory notification requirements]\n### Insurance Policies\n[Coverage details and contact information]\n### Vendor Agreements\n[Crisis-related service contracts]\n### Historical Precedents\n[Past crises and response analysis]", category: "Crisis Management" },
  { name: "Digital Transformation Roadmap", description: "Enterprise technology modernization plan", template: "# DIGITAL TRANSFORMATION ROADMAP\n\n## EXECUTIVE SUMMARY\n### Transformation Vision\n[Future state of digital capabilities]\n### Business Drivers\n[Why digital transformation is needed]\n### Success Metrics\n[Key performance indicators for success]\n### Investment Overview\n[Budget and resource requirements]\n### Timeline\n[Major milestones and completion dates]\n\n## CURRENT STATE ASSESSMENT\n### Technology Audit\n[Current systems and infrastructure]\n### Process Analysis\n[Existing workflows and inefficiencies]\n### Skills Assessment\n[Current digital capabilities and gaps]\n### Data Landscape\n[Data sources, quality, and accessibility]\n### Security Posture\n[Current cybersecurity strengths and vulnerabilities]\n### Vendor Relationships\n[Current technology partners and contracts]\n\n## FUTURE STATE VISION\n### Digital Operating Model\n[Target organizational structure and processes]\n### Technology Architecture\n[Future technology stack and integration]\n### Data Strategy\n[Data governance and analytics capabilities]\n### Customer Experience\n[Digital touchpoints and service delivery]\n### Employee Experience\n[Digital tools and workplace technology]\n### Business Model Innovation\n[New revenue streams and service offerings]\n\n## TRANSFORMATION STRATEGY\n### Strategic Pillars\n[Core areas of digital transformation]\n### Guiding Principles\n[Values and approaches that guide decisions]\n### Success Factors\n[Critical elements for transformation success]\n### Risk Management\n[Key risks and mitigation strategies]\n### Change Management\n[Organizational change approach]\n### Innovation Framework\n[How we'll drive continuous innovation]\n\n## TECHNOLOGY ROADMAP\n### Phase 1: Foundation (Months 1-6)\n[Core infrastructure and security improvements]\n### Phase 2: Automation (Months 7-12)\n[Process automation and efficiency gains]\n### Phase 3: Analytics (Months 13-18)\n[Data and analytics platform implementation]\n### Phase 4: Innovation (Months 19-24)\n[Advanced technologies and new capabilities]\n### Phase 5: Optimization (Months 25-30)\n[Continuous improvement and scaling]\n\n## PROCESS TRANSFORMATION\n### Process Mapping\n[Current state process documentation]\n### Process Redesign\n[Future state process optimization]\n### Automation Opportunities\n[Robotic process automation and AI]\n### Workflow Integration\n[Cross-functional process improvements]\n### Performance Monitoring\n[Process metrics and continuous improvement]\n\n## DATA & ANALYTICS STRATEGY\n### Data Governance\n[Data quality, security, and compliance]\n### Data Architecture\n[Data lakes, warehouses, and integration]\n### Analytics Platform\n[Business intelligence and advanced analytics]\n### AI/ML Implementation\n[Machine learning and artificial intelligence]\n### Self-Service Analytics\n[Democratizing data access and insights]\n### Data-Driven Culture\n[Building analytical capabilities organization-wide]\n\n## CUSTOMER EXPERIENCE TRANSFORMATION\n### Digital Channels\n[Omnichannel customer experience]\n### Personalization\n[Customer data and personalization engines]\n### Self-Service Capabilities\n[Customer self-service tools and portals]\n### Mobile Strategy\n[Mobile-first customer experience]\n### Customer Journey Mapping\n[Touchpoint optimization and experience design]\n### Feedback Systems\n[Customer satisfaction and Net Promoter Score]\n\n## EMPLOYEE EXPERIENCE\n### Digital Workplace\n[Collaboration tools and productivity platforms]\n### Training & Development\n[Digital skills development programs]\n### Performance Management\n[Digital performance tracking and feedback]\n### Communication Platforms\n[Internal communication and knowledge sharing]\n### Remote Work Capabilities\n[Distributed work technology and policies]\n### Employee Self-Service\n[HR and administrative self-service tools]\n\n## CYBERSECURITY & GOVERNANCE\n### Security Framework\n[Cybersecurity strategy and controls]\n### Privacy & Compliance\n[Data privacy and regulatory compliance]\n### Risk Management\n[Digital risk assessment and mitigation]\n### Governance Structure\n[IT governance and decision-making processes]\n### Vendor Management\n[Third-party risk and vendor oversight]\n### Business Continuity\n[Disaster recovery and business continuity]\n\n## ORGANIZATIONAL CHANGE\n### Change Management Strategy\n[Stakeholder engagement and communication]\n### Training Programs\n[Skills development and capability building]\n### Culture Transformation\n[Digital culture and mindset changes]\n### Leadership Development\n[Digital leadership capabilities]\n### Communication Plan\n[Transformation communication and updates]\n### Resistance Management\n[Addressing change resistance and concerns]\n\n## BUDGET & RESOURCE PLANNING\n### Investment Categories\n[Technology, people, and process investments]\n### Cost-Benefit Analysis\n[ROI projections and business case]\n### Funding Strategy\n[Capital and operational expense planning]\n### Resource Requirements\n[Internal and external resource needs]\n### Vendor Selection\n[Technology partner evaluation and selection]\n### Contract Management\n[Vendor contracts and service level agreements]\n\n## IMPLEMENTATION PLAN\n### Project Portfolio\n[Key initiatives and dependencies]\n### Resource Allocation\n[Team assignments and skill requirements]\n### Timeline & Milestones\n[Detailed project schedules and checkpoints]\n### Risk Mitigation\n[Project risks and contingency plans]\n### Quality Assurance\n[Testing and quality control processes]\n### Go-Live Planning\n[Deployment and rollout strategies]\n\n## MEASUREMENT & MONITORING\n### KPI Dashboard\n[Real-time performance monitoring]\n### Business Impact Metrics\n[Revenue, cost, and efficiency improvements]\n### Technology Performance\n[System availability and performance metrics]\n### User Adoption\n[Technology usage and satisfaction metrics]\n### ROI Tracking\n[Return on investment measurement]\n### Continuous Improvement\n[Performance optimization and enhancement]\n\n## GOVERNANCE & OVERSIGHT\n### Steering Committee\n[Executive oversight and decision-making]\n### Project Management Office\n[Program coordination and support]\n### Architecture Review Board\n[Technology standards and compliance]\n### Data Governance Council\n[Data policies and quality oversight]\n### Security Review Board\n[Cybersecurity and risk management]\n### Change Advisory Board\n[Change management and communication]\n\n## SUCCESS FACTORS\n### Leadership Commitment\n[Executive sponsorship and support]\n### Employee Engagement\n[Change adoption and participation]\n### Technology Selection\n[Right technology for business needs]\n### Project Execution\n[Effective program management]\n### Performance Monitoring\n[Continuous measurement and improvement]\n### Culture Change\n[Digital mindset and behaviors]", category: "Digital Transformation" }
];

const allBlueprints = [...freeBlueprints, ...proBlueprints];

export default function Blueprints() {
  const { isAuthenticated, subscription } = useAuth();

  // Use cached subscription data - no API call needed!
  const showAllContent = subscription?.subscribed && subscription.subscription_tier === 'JumpinAI Pro';

  const UpgradeSection = ({ message }: { message: string }) => (
    <div className="bg-muted/50 border border-border rounded-lg p-8 text-center mt-8">
      <Lock className="h-8 w-8 text-muted-foreground mb-3 mx-auto" />
      <p className="text-lg font-medium mb-2">{message}</p>
      <p className="text-muted-foreground mb-4">Upgrade to Pro to gain access to all premium content</p>
      <Button 
        onClick={() => {
          if (!isAuthenticated) {
            window.location.href = '/auth?next=' + encodeURIComponent(window.location.pathname);
          } else {
            window.location.href = '/pricing';
          }
        }}
        className="text-sm"
      >
        {!isAuthenticated ? 'Login to Subscribe' : 'Upgrade to Pro'} - $10/month
      </Button>
    </div>
  );

  const BlueprintCard = ({ blueprint, isBlurred }: { blueprint: Blueprint; isBlurred: boolean }) => (
    <Card className={`h-full ${isBlurred ? 'filter blur-[2px] pointer-events-none' : ''}`}>
      <CardHeader>
        <div className="flex items-center justify-between">
          <CardTitle className="text-lg">{blueprint.name}</CardTitle>
          <Badge variant="secondary">{blueprint.category}</Badge>
        </div>
      </CardHeader>
      <CardContent>
        <p className="text-muted-foreground mb-4">{blueprint.description}</p>
        <div>
          <h4 className="font-semibold mb-2">Template:</h4>
          <pre className="text-xs bg-muted p-3 rounded overflow-auto whitespace-pre-wrap">
            {blueprint.template}
          </pre>
        </div>
      </CardContent>
    </Card>
  );

  return (
    <div className="space-y-12">
      {/* My Blueprints Section */}
      <div className="space-y-6">
        <div className="flex items-center justify-between">
          <h2 className="text-2xl font-semibold">My Blueprints</h2>
          <Button>
            <Plus className="h-4 w-4 mr-2" />
            Create Blueprint
          </Button>
        </div>
        
        <div className="flex items-center space-x-4">
          <div className="relative flex-1 max-w-md">
            <Search className="absolute left-3 top-3 h-4 w-4 text-muted-foreground" />
            <Input 
              placeholder="Search your blueprints..." 
              className="pl-10"
            />
          </div>
          <Button variant="outline" size="sm">
            <Star className="h-4 w-4 mr-2" />
            Favorites
          </Button>
          <Button variant="outline" size="sm">
            <FileText className="h-4 w-4 mr-2" />
            Templates
          </Button>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <Card className="border-2 border-dashed border-muted-foreground/25 hover:border-primary/50 transition-colors">
            <CardContent className="flex flex-col items-center justify-center py-12 text-center">
              <Plus className="h-12 w-12 text-muted-foreground mb-4" />
              <h3 className="font-semibold mb-2">Create Your First Blueprint</h3>
              <p className="text-sm text-muted-foreground mb-4">
                Build reusable templates for your projects
              </p>
              <Button variant="outline" size="sm">Get Started</Button>
            </CardContent>
          </Card>
        </div>

        <div className="bg-muted/30 rounded-lg p-6">
          <h3 className="font-semibold mb-2">✨ Coming Soon</h3>
          <ul className="text-sm text-muted-foreground space-y-1">
            <li>• Custom template builder with variables</li>
            <li>• Blueprint versioning and history</li>
            <li>• Team sharing and collaboration</li>
            <li>• Usage analytics and optimization</li>
            <li>• Import/export functionality</li>
          </ul>
        </div>
      </div>

      {/* JumpinAI Blueprints Section */}
      <div className="space-y-6">
        <div className="border-t pt-8">
          <h2 className="text-2xl font-semibold mb-2">JumpinAI Blueprints</h2>
          <p className="text-muted-foreground">Ready-to-use templates for common business scenarios</p>
        </div>
        
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {(showAllContent ? allBlueprints : allBlueprints.slice(0, 6)).map((blueprint, index) => (
            <BlueprintCard 
              key={index} 
              blueprint={blueprint} 
              isBlurred={!showAllContent && index >= 4}
            />
          ))}
        </div>
        
        {!showAllContent && <UpgradeSection message="View more professional blueprints" />}
      </div>
    </div>
  );
}
